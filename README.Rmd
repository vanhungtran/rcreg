---
title: "rcreg: Random Coefficient Regression Models"
author: "rcreg Package"
date: "`r Sys.Date()`"
output: 
  github_document:
    toc: true
    toc_depth: 3
  html_document:
    toc: true
    toc_depth: 3
    css: vignette.css
    theme: default
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# rcreg: Random Coefficient Regression Models for Repeated Measurements

<!-- badges: start -->
<!-- badges: end -->

## Overview

`rcreg` provides a high-level interface for fitting **random coefficient regression models** (random intercept and random slope linear mixed models) for repeated measurement data. The package simplifies the specification of longitudinal mixed models by wrapping the powerful `lme4` package, offering convenient functions for:

- Model fitting with intuitive syntax
- Clean summaries of fixed and random effects
- Subject-specific and population-averaged predictions
- Model diagnostics and visualizations
- Data simulation for power analysis and teaching

## Installation

You can install the development version of `rcreg` from GitHub:

``` r
# install.packages("devtools")
devtools::install_github("vanhungtran/rcreg")
```

## Quick Start

```{r example}
library(rcreg)

# 1. Simulate Data
set.seed(123)
sim_data <- rcr_simulate(n_subjects = 50, n_timepoints = 5, rho = 0.5)
head(sim_data)

# 2. Fit a random intercept and slope model
mod <- rcr_fit(
  formula = y ~ time + x1,
  data = sim_data,
  id = "id",
  time = "time",
  random = "intercept_slope"
)

# 3. View summary (includes R-squared and ICC)
rcr_summary(mod)

# 4. Compare with a simpler model
mod_simple <- rcr_fit(y ~ time + x1, data = sim_data, id = "id", time = "time", random = "intercept")
rcr_compare(mod_simple, mod)

# 5. Visualize predictions
rcr_plot_predictions(mod, n_subjects = 10)

# 6. Diagnostics
rcr_diagnostics(mod, which = c(1, 2))
```

## Key Functions

### Model Fitting & Simulation
- `rcr_fit()`: Fit random coefficient regression models.
- `rcr_simulate()`: Generate simulated longitudinal data.

### Summaries & Inference
- `rcr_summary()`: Comprehensive summary including R-squared.
- `rcr_compare()`: Compare multiple models (AIC, BIC, LRT).
- `rcr_icc()`: Compute Intraclass Correlation Coefficient.
- `rcr_r2()`: Compute Marginal and Conditional R-squared.
- `rcr_ranef()`: Extract random effects.

### Prediction & Visualization
- `rcr_predict()`: Subject-specific or population-averaged predictions.
- `rcr_plot_predictions()`: Visualize subject trajectories.
- `rcr_diagnostics()`: Diagnostic plots.

### Utilities
- `rcr_center_time()`: Center time variables.

## References
- Bates, D., MÃ¤chler, M., Bolker, B., & Walker, S. (2015). Fitting Linear Mixed-Effects Models Using lme4. *Journal of Statistical Software*, 67(1), 1-48.
- Nakagawa, S., & Schielzeth, H. (2013). A general and simple method for obtaining R2 from generalized linear mixed-effects models. *Methods in Ecology and Evolution*, 4(2), 133-142.

## License

MIT License